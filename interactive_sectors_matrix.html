<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matriz Interactiva - 111 Sectores Econ贸micos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Calibri', 'Segoe UI', Arial, sans-serif;
            background: #f5f7fa;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.2rem;
            color: #076D55;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }

        .explanation {
            font-size: 1rem;
            color: #555;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .credit {
            font-size: 0.95rem;
            color: #076D55;
            font-weight: 500;
            margin-bottom: 25px;
            font-style: italic;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid rgba(0,0,0,0.2);
        }

        .legend-color.default {
            background: linear-gradient(135deg, #fafafa 0%, #f0f2f5 100%);
        }

        .legend-color.scc-superior {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .impact-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .impact-btn {
            padding: 10px 25px;
            border: 2px solid #076D55;
            background: white;
            color: #076D55;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Calibri', 'Segoe UI', Arial, sans-serif;
        }

        .impact-btn:hover {
            background: #f0f7f5;
        }

        .impact-btn.active {
            background: #076D55;
            color: white;
        }

        .matrix-container {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            background: #f8f9fa;
            padding: 20px;
        }

        .sectors-matrix {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            gap: 3px;
            max-width: 100%;
            margin: 0 auto;
        }

        .sector {
            aspect-ratio: 1;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.65rem;
            font-weight: 600;
            color: #2d3748;
            border: 1px solid rgba(0,0,0,0.06);
            min-height: 35px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .sector:hover {
            transform: scale(1.8);
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border: 2px solid rgba(255,255,255,0.8);
        }

        /* Paleta est茅tica moderna - Gris por defecto */
        .sector { 
            background: linear-gradient(135deg, #fafafa 0%, #f0f2f5 100%);
        }
        
        /* Sectores donde SCC supera - Verde */
        .sector.scc-superior { 
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: #ffffff;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .sector.scc-superior:hover {
            box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 15px 18px;
            border-radius: 10px;
            font-size: 0.9rem;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 300px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* Mejoras para m贸vil */
        @media (max-width: 768px) {
            .tooltip {
                font-size: 0.85rem;
                padding: 12px 16px;
                max-width: 280px;
                border-radius: 8px;
            }
            
            .sector {
                min-height: 40px; /* M谩s grande para facilitar el toque */
                font-size: 0.7rem;
            }
            
            .tooltip h4 {
                font-size: 0.9rem;
                line-height: 1.2;
            }
            
            .tooltip .data-row {
                font-size: 0.8rem;
                margin: 4px 0;
            }
            
            .tooltip .scc-data {
                font-size: 0.8rem;
                margin: 6px 0 4px 0;
                padding-top: 6px;
            }
            
            .tooltip .code {
                font-size: 0.75rem;
                margin-top: 4px;
            }
        }

        .tooltip.show {
            opacity: 1;
        }

        .tooltip h4 {
            margin-bottom: 5px;
            color: #fff;
            font-size: 1rem;
        }

        .tooltip p {
            margin: 0;
            line-height: 1.4;
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .tooltip .data-row {
            margin: 3px 0;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .tooltip .scc-data {
            margin: 8px 0 5px 0;
            font-size: 0.9rem;
            font-weight: 600;
            color: #FFD700;
            border-top: 1px solid rgba(255,255,255,0.3);
            padding-top: 8px;
        }

        .tooltip .code {
            font-family: 'Courier New', monospace;
            background: rgba(255,255,255,0.2);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-top: 5px;
            display: inline-block;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #076D55, #0a8a6b);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .insight-box {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            box-shadow: 0 10px 25px rgba(25,118,210,0.3);
        }

        .insight-box h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .insight-box p {
            font-size: 1rem;
            opacity: 0.95;
            line-height: 1.4;
        }

        @media (max-width: 1200px) {
            .sectors-matrix {
                grid-template-columns: repeat(10, 1fr);
            }
        }

        @media (max-width: 900px) {
            .sectors-matrix {
                grid-template-columns: repeat(8, 1fr);
            }
            
            .sector:hover {
                transform: scale(1.5);
            }
        }

        @media (max-width: 600px) {
            .sectors-matrix {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Matriz Insumo-Producto Chile</h1>
            <p class="subtitle">111 Sectores Econ贸micos Interactivos - Pasa el mouse o toca cada sector</p>
            <p class="explanation">
                Esta matriz representa los 111 sectores econ贸micos de Chile seg煤n el Banco Central. 
                Cada cuadrado muestra un sector con su valor agregado y participaci贸n en el PIB 2022.
            </p>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color default"></div>
                    <span>Sectores con mayor participaci贸n que SCC</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color scc-superior"></div>
                    <span>Sectores donde SCC supera al sector completo</span>
                </div>
            </div>
            
            <div class="impact-buttons">
                <button class="impact-btn active" id="btnDirecto" onclick="cambiarImpacto('directo')">
                    Impacto Directo (0,25% PIB)
                </button>
                <button class="impact-btn" id="btnTotal" onclick="cambiarImpacto('total')">
                    Impacto Total (1,2% PIB)
                </button>
            </div>
            <p class="credit">Hecho por Quiroz & Asociados para Coca-Cola Chile</p>
        </div>

        <div class="matrix-container">
            <div class="sectors-matrix" id="sectorsMatrix">
                <!-- Los sectores se generan con JavaScript -->
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">111</div>
                <div class="stat-label">Sectores Econ贸micos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">2022</div>
                <div class="stat-label">A帽o Base</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">BCCh</div>
                <div class="stat-label">Banco Central Chile</div>
            </div>
        </div>

        <div class="insight-box" id="insightBox">
            <h3> Insight Clave</h3>
            <p>La participaci贸n del SCC (0,25% del PIB) es mayor que en <strong>43/111 sectores</strong> de la MIP 2022</p>
        </div>
    </div>

    <div class="tooltip" id="tooltip">
        <h4 id="tooltipTitle"></h4>
        <div class="data-row" id="tooltipValorAgregado"></div>
        <div class="data-row" id="tooltipPibPercent"></div>
        <div class="scc-data" id="tooltipScc" style="display: none;"></div>
        <div class="code" id="tooltipCode"></div>
    </div>

    <script>
        const sectors = [
            { name: "Cultivos anuales (cereales y otros) y forrajeras", code: "01", valorAgregado: "499", pibPercent: "0,21%", mayorSCC: 1 },
            { name: "Cultivo de hortalizas y productos de viveros", code: "02", valorAgregado: "562", pibPercent: "0,24%", mayorSCC: 1 },
            { name: "Cultivo de uva", code: "03", valorAgregado: "271", pibPercent: "0,11%", mayorSCC: 1 },
            { name: "Cultivo de otras frutas", code: "04", valorAgregado: "2.130", pibPercent: "0,90%", mayorSCC: 0 },
            { name: "Cr铆a de ganado bovino", code: "05", valorAgregado: "684", pibPercent: "0,29%", mayorSCC: 0 },
            { name: "Cr铆a de cerdos", code: "06", valorAgregado: "112", pibPercent: "0,05%", mayorSCC: 1 },
            { name: "Cr铆a de aves de corral", code: "07", valorAgregado: "489", pibPercent: "0,21%", mayorSCC: 1 },
            { name: "Cr铆a de otros animales", code: "08", valorAgregado: "48", pibPercent: "0,02%", mayorSCC: 1 },
            { name: "Actividades de apoyo a la agricultura y ganader铆a", code: "09", valorAgregado: "1.145", pibPercent: "0,49%", mayorSCC: 0 },
            { name: "Silvicultura y extracci贸n de madera", code: "10", valorAgregado: "988", pibPercent: "0,42%", mayorSCC: 0 },
            { name: "Acuicultura", code: "11", valorAgregado: "1.020", pibPercent: "0,43%", mayorSCC: 0 },
            { name: "Pesca extractiva", code: "12", valorAgregado: "559", pibPercent: "0,24%", mayorSCC: 1 },
            { name: "Extracci贸n de carb贸n", code: "13", valorAgregado: "1", pibPercent: "0,00%", mayorSCC: 1 },
            { name: "Extracci贸n de petr贸leo y gas natural", code: "14", valorAgregado: "157", pibPercent: "0,07%", mayorSCC: 1 },
            { name: "Miner铆a del cobre", code: "15", valorAgregado: "25.428", pibPercent: "10,78%", mayorSCC: 0 },
            { name: "Miner铆a del hierro", code: "16", valorAgregado: "916", pibPercent: "0,39%", mayorSCC: 0 },
            { name: "Miner铆a de otros metal铆feros no ferrosos", code: "17", valorAgregado: "475", pibPercent: "0,20%", mayorSCC: 1 },
            { name: "Explotaci贸n de otras minas y servicios de apoyo a la miner铆a", code: "18", valorAgregado: "8.199", pibPercent: "3,48%", mayorSCC: 0 },
            { name: "Elaboraci贸n y conservaci贸n de carne", code: "19", valorAgregado: "661", pibPercent: "0,28%", mayorSCC: 0 },
            { name: "Elaboraci贸n de harina y aceite de pescado", code: "20", valorAgregado: "471", pibPercent: "0,20%", mayorSCC: 1 },
            { name: "Elaboraci贸n y conservaci贸n de pescados y mariscos", code: "21", valorAgregado: "1.467", pibPercent: "0,62%", mayorSCC: 0 },
            { name: "Elaboraci贸n y conservaci贸n de vegetales", code: "22", valorAgregado: "947", pibPercent: "0,40%", mayorSCC: 0 },
            { name: "Elaboraci贸n de aceites", code: "23", valorAgregado: "109", pibPercent: "0,05%", mayorSCC: 1 },
            { name: "Elaboraci贸n de productos l谩cteos", code: "24", valorAgregado: "498", pibPercent: "0,21%", mayorSCC: 1 },
            { name: "Elaboraci贸n de productos de moliner铆a", code: "25", valorAgregado: "338", pibPercent: "0,14%", mayorSCC: 1 },
            { name: "Elaboraci贸n de alimentos para animales", code: "26", valorAgregado: "1.272", pibPercent: "0,54%", mayorSCC: 0 },
            { name: "Elaboraci贸n de productos de panader铆a", code: "27", valorAgregado: "884", pibPercent: "0,37%", mayorSCC: 0 },
            { name: "Elaboraci贸n de fideos y pastas", code: "28", valorAgregado: "108", pibPercent: "0,05%", mayorSCC: 1 },
            { name: "Elaboraci贸n de otros productos alimenticios", code: "29", valorAgregado: "573", pibPercent: "0,24%", mayorSCC: 1 },
            { name: "Elaboraci贸n de piscos y licores", code: "30", valorAgregado: "21", pibPercent: "0,01%", mayorSCC: 1 },
            { name: "Elaboraci贸n de vinos", code: "31", valorAgregado: "977", pibPercent: "0,41%", mayorSCC: 0 },
            { name: "Elaboraci贸n de cervezas", code: "32", valorAgregado: "143", pibPercent: "0,06%", mayorSCC: 1 },
            { name: "Elaboraci贸n de bebidas no alcoh贸licas", code: "33", valorAgregado: "684", pibPercent: "0,29%", mayorSCC: 0 },
            { name: "Elaboraci贸n de productos de tabaco", code: "34", valorAgregado: "24", pibPercent: "0,01%", mayorSCC: 1 },
            { name: "Fabricaci贸n de productos textiles", code: "35", valorAgregado: "95", pibPercent: "0,04%", mayorSCC: 1 },
            { name: "Fabricaci贸n de prendas de vestir", code: "36", valorAgregado: "47", pibPercent: "0,02%", mayorSCC: 1 },
            { name: "Elaboraci贸n de cuero y sus productos", code: "37", valorAgregado: "16", pibPercent: "0,01%", mayorSCC: 1 },
            { name: "Fabricaci贸n de calzado", code: "38", valorAgregado: "25", pibPercent: "0,01%", mayorSCC: 1 },
            { name: "Aserrado y acepilladura de maderas", code: "39", valorAgregado: "639", pibPercent: "0,27%", mayorSCC: 0 },
            { name: "Fabricaci贸n de productos de madera", code: "40", valorAgregado: "1.025", pibPercent: "0,43%", mayorSCC: 0 },
            { name: "Fabricaci贸n de celulosa", code: "41", valorAgregado: "1.091", pibPercent: "0,46%", mayorSCC: 0 },
            { name: "Fabricaci贸n de envases de papel y cart贸n", code: "42", valorAgregado: "316", pibPercent: "0,13%", mayorSCC: 1 },
            { name: "Fabricaci贸n de otros art铆culos de papel y cart贸n", code: "43", valorAgregado: "120", pibPercent: "0,05%", mayorSCC: 1 },
            { name: "Imprentas", code: "44", valorAgregado: "354", pibPercent: "0,15%", mayorSCC: 1 },
            { name: "Elaboraci贸n de combustibles", code: "45", valorAgregado: "1.612", pibPercent: "0,68%", mayorSCC: 0 },
            { name: "Fabricaci贸n de sustancias qu铆micas b谩sicas", code: "46", valorAgregado: "2.295", pibPercent: "0,97%", mayorSCC: 0 },
            { name: "Fabricaci贸n de pinturas y barnices", code: "47", valorAgregado: "92", pibPercent: "0,04%", mayorSCC: 1 },
            { name: "Fabricaci贸n de productos farmac茅uticos", code: "48", valorAgregado: "760", pibPercent: "0,32%", mayorSCC: 0 },
            { name: "Fabricaci贸n de productos de aseo y cosm茅ticos", code: "49", valorAgregado: "60", pibPercent: "0,03%", mayorSCC: 1 },
            { name: "Fabricaci贸n de otros productos qu铆micos", code: "50", valorAgregado: "81", pibPercent: "0,03%", mayorSCC: 1 },
            { name: "Fabricaci贸n de productos de caucho", code: "51", valorAgregado: "147", pibPercent: "0,06%", mayorSCC: 1 },
            { name: "Fabricaci贸n de productos de pl谩stico", code: "52", valorAgregado: "709", pibPercent: "0,30%", mayorSCC: 0 },
            { name: "Fabricaci贸n de vidrio y productos de vidrio", code: "53", valorAgregado: "133", pibPercent: "0,06%", mayorSCC: 1 },
            { name: "Fabricaci贸n de cemento, cal y yeso", code: "54", valorAgregado: "169", pibPercent: "0,07%", mayorSCC: 1 },
            { name: "Fabricaci贸n de hormig贸n y otros productos minerales no met谩licos", code: "55", valorAgregado: "519", pibPercent: "0,22%", mayorSCC: 1 },
            { name: "Industrias b谩sicas de hierro y acero", code: "56", valorAgregado: "499", pibPercent: "0,21%", mayorSCC: 1 },
            { name: "Industrias b谩sicas de metales no ferrosos", code: "57", valorAgregado: "136", pibPercent: "0,06%", mayorSCC: 1 },
            { name: "Fabricaci贸n de productos met谩licos", code: "58", valorAgregado: "1.735", pibPercent: "0,74%", mayorSCC: 0 },
            { name: "Fabricaci贸n de maquinaria y equipo de uso industrial y dom茅stico", code: "59", valorAgregado: "768", pibPercent: "0,33%", mayorSCC: 0 },
            { name: "Fabricaci贸n de maquinaria y equipo el茅ctrico y electr贸nico", code: "60", valorAgregado: "476", pibPercent: "0,20%", mayorSCC: 1 },
            { name: "Fabricaci贸n de equipo de transporte", code: "61", valorAgregado: "225", pibPercent: "0,10%", mayorSCC: 1 },
            { name: "Fabricaci贸n de muebles", code: "62", valorAgregado: "173", pibPercent: "0,07%", mayorSCC: 1 },
            { name: "Reparaci贸n de maquinaria y equipo y otras industrias manufactureras", code: "63", valorAgregado: "1.433", pibPercent: "0,61%", mayorSCC: 0 },
            { name: "Generaci贸n de electricidad", code: "64", valorAgregado: "1.518", pibPercent: "0,64%", mayorSCC: 0 },
            { name: "Transmisi贸n de electricidad", code: "65", valorAgregado: "928", pibPercent: "0,39%", mayorSCC: 0 },
            { name: "Distribuci贸n de electricidad", code: "66", valorAgregado: "891", pibPercent: "0,38%", mayorSCC: 0 },
            { name: "Suministro de gas y vapor", code: "67", valorAgregado: "716", pibPercent: "0,30%", mayorSCC: 0 },
            { name: "Suministro de agua", code: "68", valorAgregado: "1.307", pibPercent: "0,55%", mayorSCC: 0 },
            { name: "Gesti贸n de desechos y reciclaje", code: "69", valorAgregado: "748", pibPercent: "0,32%", mayorSCC: 0 },
            { name: "Construcci贸n de edificios residenciales", code: "70", valorAgregado: "3.177", pibPercent: "1,35%", mayorSCC: 0 },
            { name: "Construcci贸n de edificios no residenciales", code: "71", valorAgregado: "1.118", pibPercent: "0,47%", mayorSCC: 0 },
            { name: "Construcci贸n de obras de ingenier铆a civil", code: "72", valorAgregado: "5.202", pibPercent: "2,21%", mayorSCC: 0 },
            { name: "Actividades especializadas de construcci贸n", code: "73", valorAgregado: "5.931", pibPercent: "2,52%", mayorSCC: 0 },
            { name: "Comercio automotriz", code: "74", valorAgregado: "3.169", pibPercent: "1,34%", mayorSCC: 0 },
            { name: "Comercio mayorista", code: "75", valorAgregado: "10.958", pibPercent: "4,65%", mayorSCC: 0 },
            { name: "Comercio minorista", code: "76", valorAgregado: "9.873", pibPercent: "4,19%", mayorSCC: 0 },
            { name: "Hoteles", code: "77", valorAgregado: "794", pibPercent: "0,34%", mayorSCC: 0 },
            { name: "Restaurantes", code: "78", valorAgregado: "3.691", pibPercent: "1,57%", mayorSCC: 0 },
            { name: "Transporte ferroviario", code: "79", valorAgregado: "107", pibPercent: "0,05%", mayorSCC: 1 },
            { name: "Otros transportes terrestres de pasajeros", code: "80", valorAgregado: "1.275", pibPercent: "0,54%", mayorSCC: 0 },
            { name: "Transporte de carga por carretera", code: "81", valorAgregado: "3.852", pibPercent: "1,63%", mayorSCC: 0 },
            { name: "Transporte por tuber铆as (gasoductos y oleoductos)", code: "82", valorAgregado: "137", pibPercent: "0,06%", mayorSCC: 1 },
            { name: "Transporte mar铆timo", code: "83", valorAgregado: "455", pibPercent: "0,19%", mayorSCC: 1 },
            { name: "Transporte a茅reo", code: "84", valorAgregado: "822", pibPercent: "0,35%", mayorSCC: 0 },
            { name: "Actividades de almacenamiento y dep贸sito", code: "85", valorAgregado: "936", pibPercent: "0,40%", mayorSCC: 0 },
            { name: "Actividades de apoyo al transporte terrestre", code: "86", valorAgregado: "1.699", pibPercent: "0,72%", mayorSCC: 0 },
            { name: "Otras actividades de apoyo al transporte", code: "87", valorAgregado: "2.762", pibPercent: "1,17%", mayorSCC: 0 },
            { name: "Correo y servicios de mensajer铆a", code: "88", valorAgregado: "437", pibPercent: "0,19%", mayorSCC: 1 },
            { name: "Telefon铆a m贸vil", code: "89", valorAgregado: "507", pibPercent: "0,22%", mayorSCC: 1 },
            { name: "Telefon铆a fija y larga distancia", code: "90", valorAgregado: "617", pibPercent: "0,26%", mayorSCC: 0 },
            { name: "Otras actividades de telecomunicaciones", code: "91", valorAgregado: "919", pibPercent: "0,39%", mayorSCC: 0 },
            { name: "Actividades de servicios inform谩ticos e informaci贸n", code: "92", valorAgregado: "4.130", pibPercent: "1,75%", mayorSCC: 0 },
            { name: "Otras actividades de edici贸n, producci贸n y difusi贸n", code: "93", valorAgregado: "673", pibPercent: "0,29%", mayorSCC: 0 },
            { name: "Intermediaci贸n financiera", code: "94", valorAgregado: "5.001", pibPercent: "2,12%", mayorSCC: 0 },
            { name: "Actividades de seguros y reaseguros", code: "95", valorAgregado: "834", pibPercent: "0,35%", mayorSCC: 0 },
            { name: "Auxiliares financieros", code: "96", valorAgregado: "2.844", pibPercent: "1,21%", mayorSCC: 0 },
            { name: "Actividades inmobiliarias", code: "97", valorAgregado: "5.212", pibPercent: "2,21%", mayorSCC: 0 },
            { name: "Servicios de vivienda", code: "98", valorAgregado: "15.539", pibPercent: "6,59%", mayorSCC: 0 },
            { name: "Actividades de servicios jur铆dicos y contables", code: "99", valorAgregado: "2.834", pibPercent: "1,20%", mayorSCC: 0 },
            { name: "Actividades de arquitectura e ingenier铆a", code: "100", valorAgregado: "5.978", pibPercent: "2,53%", mayorSCC: 0 },
            { name: "Otras actividades profesionales, cient铆ficas y t茅cnicas", code: "101", valorAgregado: "6.379", pibPercent: "2,70%", mayorSCC: 0 },
            { name: "Actividades de alquiler y arrendamiento", code: "102", valorAgregado: "2.525", pibPercent: "1,07%", mayorSCC: 0 },
            { name: "Actividades administrativas y de apoyo", code: "103", valorAgregado: "7.357", pibPercent: "3,12%", mayorSCC: 0 },
            { name: "Administraci贸n p煤blica", code: "104", valorAgregado: "11.638", pibPercent: "4,94%", mayorSCC: 0 },
            { name: "Educaci贸n p煤blica", code: "105", valorAgregado: "7.819", pibPercent: "3,32%", mayorSCC: 0 },
            { name: "Educaci贸n privada", code: "106", valorAgregado: "4.961", pibPercent: "2,10%", mayorSCC: 0 },
            { name: "Salud p煤blica", code: "107", valorAgregado: "7.474", pibPercent: "3,17%", mayorSCC: 0 },
            { name: "Salud privada y asistencia social", code: "108", valorAgregado: "7.213", pibPercent: "3,06%", mayorSCC: 0 },
            { name: "Actividades asociaciones", code: "109", valorAgregado: "838", pibPercent: "0,36%", mayorSCC: 0 },
            { name: "Actividades art铆sticas, entretenimiento y recreaci贸n", code: "110", valorAgregado: "1.197", pibPercent: "0,51%", mayorSCC: 0 },
            { name: "Otras actividades de servicios personales", code: "111", valorAgregado: "2.207", pibPercent: "0,94%", mayorSCC: 0 }
        ];

        const matrix = document.getElementById('sectorsMatrix');
        const tooltip = document.getElementById('tooltip');
        const tooltipTitle = document.getElementById('tooltipTitle');
        const tooltipValorAgregado = document.getElementById('tooltipValorAgregado');
        const tooltipPibPercent = document.getElementById('tooltipPibPercent');
        const tooltipScc = document.getElementById('tooltipScc');
        const tooltipCode = document.getElementById('tooltipCode');
        const insightBox = document.getElementById('insightBox');

        let impactoActual = 'directo'; // Variable para rastrear el impacto actual
        let sectorElements = [];

        // Hacer la funci贸n global para el onclick
        window.cambiarImpacto = function(tipo) {
            impactoActual = tipo;
            
            // Actualizar botones activos
            document.getElementById('btnDirecto').classList.toggle('active', tipo === 'directo');
            document.getElementById('btnTotal').classList.toggle('active', tipo === 'total');
            
            // Actualizar colores de los sectores
            actualizarColoresSectores();
            
            // Actualizar insight box
            actualizarInsightBox();
        }

        // Funci贸n para parsear el porcentaje del PIB
        function parsePibPercent(percent) {
            return parseFloat(percent.replace(',', '.').replace('%', ''));
        }

        // Funci贸n para actualizar los colores de los sectores
        function actualizarColoresSectores() {
            const umbralSCC = impactoActual === 'directo' ? 0.25 : 1.2;
            
            sectorElements.forEach((element, index) => {
                const sector = sectors[index];
                const sectorPib = parsePibPercent(sector.pibPercent);
                
                element.classList.remove('scc-superior');
                
                if (sectorPib < umbralSCC) {
                    element.classList.add('scc-superior');
                }
            });
        }

        // Funci贸n para actualizar el insight box
        function actualizarInsightBox() {
            const umbralSCC = impactoActual === 'directo' ? 0.25 : 1.2;
            
            const sectoresInferiores = sectors.filter(s => 
                parsePibPercent(s.pibPercent) < umbralSCC
            ).length;
            
            insightBox.innerHTML = `
                <h3> Insight Clave</h3>
                <p>La participaci贸n del SCC (${umbralSCC.toString().replace('.', ',')}% del PIB) es mayor que en <strong>${sectoresInferiores}/111 sectores</strong> de la MIP 2022</p>
            `;
        }

        // Crear la matriz
        sectors.forEach((sector, index) => {
            const sectorElement = document.createElement('div');
            sectorElement.className = 'sector';
            
            // Usar la comparaci贸n inicial con impacto directo
            const sectorPib = parsePibPercent(sector.pibPercent);
            if (sectorPib < 0.25) {
                sectorElement.classList.add('scc-superior');
            }
            
            sectorElement.textContent = (index + 1).toString();
            sectorElement.setAttribute('data-sector', JSON.stringify(sector));
            
            sectorElement.addEventListener('mouseenter', (e) => {
                showTooltip(sector, e);
            });
            
            sectorElement.addEventListener('mouseleave', () => {
                hideTooltip();
            });
            
            // Soporte para dispositivos m贸viles
            sectorElement.addEventListener('touchstart', (e) => {
                e.preventDefault(); // Evitar scroll accidental
                showTooltip(sector, e.touches[0]); // Usar la primera touch
            });
            
            sectorElement.addEventListener('click', (e) => {
                // Para m贸viles que no soportan touchstart
                showTooltip(sector, e);
            });
            
            matrix.appendChild(sectorElement);
            sectorElements.push(sectorElement);
        });

        // Funci贸n para mostrar tooltip
        function showTooltip(sector, event) {
            tooltipTitle.textContent = sector.name;
            tooltipValorAgregado.textContent = `Valor Agregado: ${sector.valorAgregado} miles de millones de pesos 2022`;
            tooltipPibPercent.textContent = `Participaci贸n PIB 2022: ${sector.pibPercent}`;
            tooltipCode.textContent = `C贸digo: ${sector.code}`;
            
            // Mostrar informaci贸n SCC seg煤n el impacto seleccionado
            const umbralSCC = impactoActual === 'directo' ? '0,25%' : '1,2%';
            const tipoImpacto = impactoActual === 'directo' ? 'Directo' : 'Total';
            tooltipScc.textContent = `Impacto ${tipoImpacto} SCC en PIB: ${umbralSCC}`;
            tooltipScc.style.display = 'block';
            
            tooltip.classList.add('show');
            
            // Posicionar tooltip considerando scroll
            updateTooltipPosition(event);
        }

        // Funci贸n para ocultar tooltip
        function hideTooltip() {
            tooltip.classList.remove('show');
        }

        // Ocultar tooltip al tocar fuera en m贸viles
        document.addEventListener('touchstart', (e) => {
            if (!e.target.classList.contains('sector') && tooltip.classList.contains('show')) {
                hideTooltip();
            }
        });

        // Ocultar tooltip al hacer click fuera
        document.addEventListener('click', (e) => {
            if (!e.target.classList.contains('sector') && tooltip.classList.contains('show')) {
                hideTooltip();
            }
        });

        // Funci贸n para actualizar posici贸n del tooltip considerando scroll
        function updateTooltipPosition(e) {
            if (tooltip.classList.contains('show')) {
                const scrollY = window.pageYOffset || document.documentElement.scrollTop;
                const scrollX = window.pageXOffset || document.documentElement.scrollLeft;
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                
                // Detectar si es dispositivo m贸vil
                const isMobile = windowWidth <= 768;
                
                if (isMobile) {
                    // En m贸viles, centrar el tooltip en la pantalla
                    let left = (windowWidth - 300) / 2 + scrollX;
                    let top = e.clientY + scrollY - 150;
                    
                    // Asegurar que no se salga de la pantalla
                    if (left < scrollX + 10) left = scrollX + 10;
                    if (left + 300 > windowWidth + scrollX) left = windowWidth + scrollX - 310;
                    
                    if (top < scrollY + 10) {
                        top = e.clientY + scrollY + 30; // Mostrar debajo
                    }
                    
                    tooltip.style.left = left + 'px';
                    tooltip.style.top = top + 'px';
                } else {
                    // L贸gica original para desktop
                    let left = e.clientX + scrollX + 20;
                    let top = e.clientY + scrollY - 120;
                    
                    if (left + 300 > windowWidth + scrollX) {
                        left = e.clientX + scrollX - 320;
                    }
                    if (left < scrollX + 10) {
                        left = scrollX + 10;
                    }
                    
                    if (top < scrollY + 10) {
                        top = e.clientY + scrollY + 30;
                    }
                    if (top + 200 > windowHeight + scrollY) {
                        top = e.clientY + scrollY - 200;
                    }
                    
                    tooltip.style.left = left + 'px';
                    tooltip.style.top = top + 'px';
                }
            }
        }


    </script>
</body>
</html>
